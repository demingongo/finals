SELECT * FROM (SELECT * FROM `category` as `c` WHERE c.published = 1 and c.root IN (SELECT `id` FROM `category` WHERE `root` = `id` AND `published`= 1)) as `cc`





SELECT * FROM (SELECT * FROM `category` as `c` WHERE c.published = 1 and c.id IN (SELECT `id` FROM `category` as `cc` WHERE cc.root = c.root AND cc.published = 1 AND c.lft > cc.lft AND c.rgt < cc.rgt )) as `c1`




SELECT * FROM `category` as `c` WHERE c.published = 1 AND c.root <> c.id AND c.id IN (SELECT `id` FROM `category` as `cc` WHERE cc.root = c.root AND cc.published = 1 AND cc.lft = c.lft )


SELECT count(*) FROM `category` WHERE lft < (SELECT lft FROM `category` WHERE id = 3) AND root = (SELECT root FROM `category` WHERE id = 3) AND published = 0

SELECT count(*) FROM `category` WHERE lft < (SELECT lft FROM `category` WHERE id = 3) AND root = (SELECT root FROM `category` WHERE id = 3) AND published = 0

SELECT * FROM `category` as `c1` WHERE 0 = (SELECT count(*) FROM `category` WHERE lft < (SELECT lft FROM `category` WHERE id = c1.id) AND rgt > (SELECT rgt FROM `category` WHERE id = c1.id) AND root = (SELECT root FROM `category` WHERE id = c1.id) AND published = 0) AND c1.published = 1

(
SELECT * FROM article WHERE category_id IN (SELECT id FROM `category` as `c1` WHERE 0 = (SELECT count(*) FROM `category` WHERE lft < (SELECT lft FROM `category` WHERE id = c1.id) AND rgt > (SELECT rgt FROM `category` WHERE id = c1.id) AND root = (SELECT root FROM `category` WHERE id = c1.id) AND published = 0) AND c1.published = 1)
)

